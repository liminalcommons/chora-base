# Awareness Guide: Cross-Platform Development Fundamentals

**SAP ID**: SAP-030
**Version**: 1.0.0
**For**: AI Agents, LLM-Based Assistants
**Last Updated**: 2025-11-03

---

## Quick Start for AI Agents

### One-Sentence Summary

SAP-030 provides core cross-platform development patterns (Python-first scripting, pathlib paths, line ending normalization) and detection utilities to prevent platform-specific rework and enable Windows/Mac/Linux compatibility.

### When to Use This SAP

Use SAP-030 when:
<!-- TODO: List use cases when agents should use this SAP -->
- ‚úÖ [Use case 1]
- ‚úÖ [Use case 2]
- ‚úÖ [Use case 3]

Don't use SAP-030 for:
<!-- TODO: List cases when agents should NOT use this SAP -->
- ‚ùå [Non-use case 1]
- ‚ùå [Non-use case 2]

---

## 1. Core Concepts for Agents

<!-- TODO: Provide decision trees, key concepts, mental models for AI agents

This section helps agents quickly understand:
- Key decisions they need to make
- Common patterns and anti-patterns
- Mental models for this capability
-->

### Key Concepts

**Concept 1**: [Name]
- **Description**: [What agents need to know]
- **When to use**: [Conditions]
- **Example**: [Concrete example]

**Concept 2**: [Name]
- **Description**: [What agents need to know]
- **When to use**: [Conditions]
- **Example**: [Concrete example]

### Decision Tree

```
User request about Cross-Platform Development Fundamentals
   ‚îÇ
   ‚îú‚îÄ [Condition 1]?
   ‚îÇ   ‚îî‚îÄ> [Recommendation/Action]
   ‚îÇ
   ‚îú‚îÄ [Condition 2]?
   ‚îÇ   ‚îî‚îÄ> [Recommendation/Action]
   ‚îÇ
   ‚îî‚îÄ [Condition 3]?
       ‚îî‚îÄ> [Recommendation/Action]
```

---

## 2. Common Agent Workflows

<!-- TODO: Define step-by-step workflows for common agent tasks

Each workflow should include:
- User request (trigger)
- Agent actions (numbered steps)
- Validation (how to verify)
- Common variations
-->

### Workflow 1: [Most Common Task]

**User Request**: "[Typical user request]"

**Agent Actions**:
1. [Step 1 with specific tool/command]
2. [Step 2 with specific tool/command]
3. [Step 3 with specific tool/command]

**Validation**:
```bash
# Command to verify workflow succeeded
# TODO: Add validation command
```

**Expected Output**:
```
# TODO: Show expected output
```

**Common Variations**:
- **Variation 1**: If [condition], then [alternative action]
- **Variation 2**: If [condition], then [alternative action]

### Workflow 2: [Second Common Task]

**User Request**: "[Typical user request]"

**Agent Actions**:
1. [Step 1]
2. [Step 2]
3. [Step 3]

**Validation**:
```bash
# TODO: Add validation command
```

### Workflow 3: [Third Common Task]

**User Request**: "[Typical user request]"

**Agent Actions**:
1. [Step 1]
2. [Step 2]
3. [Step 3]

**Validation**:
```bash
# TODO: Add validation command
```

---

## 3. Quick Reference for Agents

<!-- TODO: Provide cheat sheet for agents

Include:
- Key commands
- File paths
- Configuration snippets
- Common patterns
-->

### Key Commands

```bash
# Most common command
# TODO: Add command

# Validation command
# TODO: Add validation command

# Status check command
# TODO: Add status command
```

### Important File Paths

| File | Purpose | Agent Action |
|------|---------|--------------|
| `[file-path]` | [Purpose] | [What agents should do with this file] |

<!-- TODO: Add key file paths -->

### Configuration Snippets

**Configuration 1**: [Purpose]
```yaml
# TODO: Add configuration example
cross-platform-fundamentals:
  enabled: true
```

### Common Patterns

**Pattern 1**: [Pattern name]
```python
# TODO: Add code pattern
```

---

## 4. Integration with Other SAPs

<!-- TODO: Describe how this SAP works with other SAPs

Help agents understand:
- Which SAPs to use together
- Integration points
- Workflow combinations
-->


### Required Dependencies


#### SAP-000

**Relationship**: [How this SAP depends on SAP-000]

**Agent Workflow**:
1. When using SAP-030, check if SAP-000 is installed
2. If not, recommend installing SAP-000 first
3. [Additional integration steps]




### Complementary SAPs

<!-- TODO: List SAPs that work well together with this one -->

**SAP-XXX**: [Name]
- **Use together when**: [Condition]
- **Benefit**: [Why combine these SAPs]

---

## 5. Error Patterns & Troubleshooting

<!-- TODO: Common errors agents encounter and how to fix them

Help agents:
- Recognize error patterns
- Provide solutions
- Avoid common mistakes
-->

### Error Pattern 1: [Error Message or Symptom]

**Symptoms**:
- [What the user/agent will see]
- [Error message excerpt]

**Cause**: [Why this happens]

**Agent Solution**:
1. [Step to diagnose]
2. [Step to fix]
3. [Step to verify fix]

**Prevention**: [How to avoid this error]

### Error Pattern 2: [Error Message or Symptom]

**Symptoms**: [Description]

**Cause**: [Why this happens]

**Agent Solution**:
1. [Fix step 1]
2. [Fix step 2]

---

## 6. Agent Communication Patterns

<!-- TODO: How agents should communicate about this SAP to users

Guide agents on:
- How to explain concepts
- What details to include
- Common user questions
-->

### Explaining Cross-Platform Development Fundamentals to Users

**Simple Explanation** (for beginners):
> [1-2 sentence explanation in simple terms]

**Technical Explanation** (for experienced users):
> [1-2 sentence technical explanation]

### Common User Questions

**Q: [Common question 1]?**

**Agent Response**:
[How to answer - reference relevant sections]

**Q: [Common question 2]?**

**Agent Response**:
[How to answer]

---

## 7. Best Practices for Agents

<!-- TODO: Guidelines for agents using this SAP

Include:
- Best practices
- Anti-patterns to avoid
- Efficiency tips
- Quality checks
-->

### Do's ‚úÖ

- ‚úÖ [Best practice 1]
- ‚úÖ [Best practice 2]
- ‚úÖ [Best practice 3]

### Don'ts ‚ùå

- ‚ùå [Anti-pattern 1]
- ‚ùå [Anti-pattern 2]
- ‚ùå [Anti-pattern 3]

### Efficiency Tips

**Tip 1**: [Optimization]
- **Why**: [Benefit]
- **How**: [Implementation]

**Tip 2**: [Optimization]
- **Why**: [Benefit]
- **How**: [Implementation]

---

## 8. Validation & Quality Checks

<!-- TODO: How agents should validate their work

Help agents:
- Verify correct implementation
- Check quality
- Confirm success
-->

### Agent Self-Check Checklist

Before completing a task with SAP-030, agents should verify:

- [ ] [Check 1]
- [ ] [Check 2]
- [ ] [Check 3]
- [ ] Validation command executed successfully
- [ ] User confirmed expected behavior

### Validation Commands

```bash
# Primary validation
# TODO: Add validation command

# Secondary validation (optional)
# TODO: Add additional checks
```

---

## 9. Version Compatibility

**Current Version**: 1.0.0

### Compatibility Notes

- **SAP-030 1.0.0** is compatible with:


  - SAP-000 1.0.0+



### Breaking Changes

<!-- TODO: Document any breaking changes from previous versions -->

**No breaking changes** (initial release)

---

## 10. Enforcement Patterns (SAP-031 Integration)

### Enforcement Architecture

SAP-030 cross-platform patterns are enforced through SAP-031 (Discoverability-Based Enforcement) using a 5-layer architecture achieving 99%+ prevention rate.

**Reference Implementation**: chora-base Windows compatibility (Nov 2025)
- **Before enforcement**: 142 issues (38 critical, 104 high priority), 65/100 compatibility score
- **After enforcement**: 0 critical issues, 95/100 compatibility score, 99%+ prevention rate
- **ROI**: 4,000%+ (10h setup prevents 160h/year issues)

### Layer 1: Discoverability (70% Prevention)

**Root AGENTS.md Reminder**:
```markdown
## üî¥ CROSS-PLATFORM REMINDER

**ALL code MUST work on Windows, Mac, and Linux without modification.**

Before writing Python scripts, read: **[scripts/AGENTS.md](scripts/AGENTS.md)** for cross-platform patterns.

**Quick Template**: Copy [templates/cross-platform/python-script-template.py](templates/cross-platform/python-script-template.py)
```

**Domain AGENTS.md** ([scripts/AGENTS.md](../../../scripts/AGENTS.md)):
- 5 core patterns (UTF-8 console, file I/O encoding, pathlib, etc.)
- Anti-patterns (what NOT to do)
- Template link (production-ready starting point)
- Max 200 lines (quick reference, <30 sec discovery time)

**Template File** ([templates/cross-platform/python-script-template.py](../../../templates/cross-platform/python-script-template.py)):
- All patterns pre-implemented (production-ready)
- Comments explain each pattern
- Copy + customize in <5 min

### Layer 2: Pre-Commit Validation (20% Prevention)

**Validation Script** ([scripts/validate-windows-compat.py](../../../scripts/validate-windows-compat.py)):
```bash
# Detect cross-platform violations
python scripts/validate-windows-compat.py

# Validate specific file
python scripts/validate-windows-compat.py --file scripts/your-script.py

# Validate scripts directory only
python scripts/validate-windows-compat.py --scripts-only
```

**Pre-Commit Hook** ([.githooks/pre-commit-windows-compat](../../../.githooks/pre-commit-windows-compat)):
```bash
# Install hook
git config core.hooksPath .githooks

# Hook runs automatically on commit
git commit -m "message"

# Bypass if needed (not recommended)
git commit --no-verify
```

**Self-Service Fix Tool** ([scripts/fix-encoding-issues.py](../../../scripts/fix-encoding-issues.py)):
```bash
# Dry-run (show what would be fixed)
python scripts/fix-encoding-issues.py

# Apply fixes
python scripts/fix-encoding-issues.py --apply

# Fix specific file
python scripts/fix-encoding-issues.py --file scripts/your-script.py --apply
```

### Layer 3: CI/CD Validation (9% Prevention)

**GitHub Actions Workflow** ([.github/workflows/cross-platform-test.yml](../../../.github/workflows/cross-platform-test.yml)):
```yaml
# Matrix testing on Windows, Mac, Linux
strategy:
  matrix:
    os: [ubuntu-latest, macos-latest, windows-latest]
    python-version: ['3.8', '3.11']

# Runs on push + PR
on: [push, pull_request]
```

**Validation Report**:
- Artifact uploaded on failure
- Download via: `gh run download [run-id] --name validation-report`

### Layer 4: Documentation (Support)

**CONTRIBUTING.md** ([CONTRIBUTING.md](../../../CONTRIBUTING.md)):
- Cross-platform quick checklist
- Validation workflow
- Common mistakes (do/don't examples)

**PR Template** ([.github/pull_request_template.md](../../../.github/pull_request_template.md)):
- Cross-platform checklist (required)
- Platform testing documentation
- Validation output paste

### Layer 5: Review (1% Prevention)

**Human Verification**:
- PR checklist confirmation
- At least one platform manual testing
- Cross-platform edge case validation

### Enforcement Workflow (Agent Perspective)

```
Session Start
    ‚Üì
Root AGENTS.md (see cross-platform reminder)
    ‚Üì
scripts/AGENTS.md (find 5 patterns + template link)
    ‚Üì
Copy template (90% correct by default)
    ‚Üì
Customize (add business logic)
    ‚Üì
Pre-commit hook validates (catch mistakes)
    ‚Üì
CI/CD validates on Windows/Mac/Linux (catch platform-specific issues)
    ‚Üì
PR review (human final check)
    ‚Üì
‚úÖ Cross-platform compliant (99%+ confidence)
```

### Agent Actions for Enforcement

**When creating new Python scripts**:
1. Copy template: `cp templates/cross-platform/python-script-template.py scripts/new-script.py`
2. Customize business logic (keep patterns intact)
3. Validate: `python scripts/validate-windows-compat.py --file scripts/new-script.py`
4. Commit (hook runs automatically)

**When fixing cross-platform violations**:
1. Run validation: `python scripts/validate-windows-compat.py --file scripts/problem-script.py`
2. Auto-fix if possible: `python scripts/fix-encoding-issues.py --file scripts/problem-script.py --apply`
3. Manual fix if needed (reference [scripts/AGENTS.md](../../../scripts/AGENTS.md))
4. Re-validate to confirm fix

**When enforcement blocks commit**:
1. Read error message (explains why + how to fix)
2. Try self-service fix tool first
3. If legitimate edge case, bypass with `--no-verify` and document reason
4. If false positive, file issue to refine validation rule

### Prevention Rate Measurement

**Baseline** (before enforcement):
```bash
python scripts/validate-windows-compat.py > baseline.txt
grep "ERROR" baseline.txt | wc -l  # Count violations
```

**Current** (after 2 weeks):
```bash
# Validate recent files
git log --since="2 weeks ago" --name-only | grep "\.py$" | sort -u > recent-files.txt
python scripts/validate-windows-compat.py --file-list recent-files.txt > current.txt
grep "ERROR" current.txt | wc -l  # Count new violations
```

**Prevention Rate**:
```
Prevention Rate = (1 - current_violations / baseline_violations) * 100%
Target: ‚â•90%
chora-base achieved: 99%+ (142 issues ‚Üí 0 critical)
```

### Integration with SAP-031

**See SAP-031 for**:
- Complete enforcement architecture specification
- Domain-agnostic enforcement framework (applicable to security, accessibility, etc.)
- Progressive enforcement strategy (warn ‚Üí educate ‚Üí block)
- Detailed adoption blueprint (3 levels: Basic 2-4h, Advanced 1-2d, Mastery 1w)

**SAP-030 provides**:
- Reference implementation of SAP-031 pattern for cross-platform domain
- Proven 99%+ prevention rate
- Complete automation tooling (validation, fix, CI/CD)
- Production-ready templates and patterns

---

## 11. Additional Resources

### Within chora-base

- [Protocol Specification](./protocol-spec.md) - Technical contracts
- [Adoption Blueprint](./adoption-blueprint.md) - Step-by-step installation
- [Capability Charter](./capability-charter.md) - Problem statement and scope

### External Resources

<!-- TODO: Link to relevant external resources for agent learning -->

- [External Resource 1](https://example.com) - [Description]
- [External Resource 2](https://example.com) - [Description]

---

**For Agents**: This awareness guide is your quick reference. For detailed technical specifications, see [protocol-spec.md](./protocol-spec.md). For installation instructions, see [adoption-blueprint.md](./adoption-blueprint.md).

**Version**: 1.0.0 (2025-11-03)