# Upgrading from v1.3.1 to v1.4.0

**Release Date**: 2025-10-19
**Template Version**: v1.3.1 → v1.4.0
**Upgrade Effort**: 2-4 hours
**For**: Human developers, AI coding agents

---

## Quick Assessment

| Aspect | Value |
|--------|-------|
| **Effort** | 2-4 hours |
| **Breaking Changes** | No |
| **Required For** | DX improvement, ecosystem consistency |
| **Can Skip If** | Not publishing to PyPI, comfortable with current workflow |
| **Displacement Risk** | MEDIUM (workflow change, not correctness) |
| **Agent Autonomy** | 60% (workflow replacement needs evaluation) |

---

## TL;DR

**What's New**:
- PyPI authentication configuration (~420 lines documentation)
- `just` auto-installation and primary interface (~380 lines changes)
- Enhanced task discovery for AI agents

**Impact on Existing Adopters**:
- IF publishing to PyPI: Clarifies authentication setup (token vs trusted publishing)
- IF using scripts directly: `just` now auto-installs and becomes primary interface
- IF AI agent: Task discovery pattern changes from parsing docs → `just --list`

**Recommended Action**:
- **For new projects**: Adopt immediately (better DX from day 1)
- **For v1.3.x adopters**: Upgrade for PyPI clarity + ecosystem consistency
- **For multi-project AI agents**: Upgrade (knowledge transfer benefit)
- **For single-project, stable workflows**: Evaluate (benefits vs migration cost)

---

## Decision Tree for AI Agents

```
START

├─ Will project publish to PyPI?
│  ├─ YES → Upgrade recommended (PyPI setup clarity)
│  └─ NO → Continue evaluation
│
├─ Working across multiple chora-base projects?
│  ├─ YES → Upgrade recommended (ecosystem consistency)
│  └─ NO → Continue evaluation
│
├─ Current task discovery method?
│  ├─ Parsing docs/scripts → Upgrade beneficial (machine-readable catalog)
│  ├─ Well-established patterns → Evaluate costs vs benefits
│  └─ New to project → Upgrade (start with standard)
│
├─ Customizations in README/CONTRIBUTING/AGENTS.md?
│  ├─ NO → Safe to adopt (copier update)
│  └─ YES → Review merge strategy (docs sections affected)
│
END: RECOMMENDED → Upgrade (benefits outweigh costs for most cases)
```

**Criteria by Project Type**:

| Project Type | Adopt If | Defer If | Skip If |
|--------------|----------|----------|---------|
| **New Project** (v1.3.x) | Always | N/A | N/A |
| **Publishing to PyPI** | Need clear setup | Already configured | Never publishing |
| **Multi-Project Agent** | Cross-project work | Single project only | N/A |
| **Customized Docs** | Can merge changes | Heavy customization | Don't use docs |

---

## What Changed

### Files Added

**New Template Files**:
1. `template/PYPI_SETUP.md.jinja` (~420 lines)
   - **Purpose**: Step-by-step PyPI publishing setup guide
   - **When included**: Always (if `include_github_actions=true`)
   - **Conflicts with**: Existing PyPI docs (if any)
   - **Agent impact**: Clear reference for PyPI publishing workflows

### Files Modified

**Changed Template Files**:

1. `template/scripts/setup.sh.jinja`
   - **Lines changed**: +38 -5
   - **Change type**: Enhancement (auto-install `just`)
   - **Displacement risk**: LOW (pure addition, no breaking changes)
   - **Customization impact**: Unlikely to conflict (unless heavily modified)
   - **Diff summary**:
     ```diff
     + # Install just command runner (primary development interface)
     + if ! command -v just &> /dev/null; then
     +     [installation logic for macOS/Linux]
     + fi
     ```

2. `template/scripts/check-env.sh.jinja`
   - **Lines changed**: +28 -0
   - **Change type**: Enhancement (verify `just` availability)
   - **Displacement risk**: LOW (new check added)
   - **Customization impact**: Unlikely to conflict
   - **Diff summary**:
     ```diff
     + # Check 8: just command runner (optional but recommended)
     + if ! command -v just &> /dev/null; then
     +     echo "ℹ 'just' command runner not found"
     +     [shows installation instructions]
     + fi
     ```

3. `template/README.md.jinja`
   - **Lines changed**: +67 -31
   - **Change type**: Restructure (lead with `just --list`)
   - **Displacement risk**: MEDIUM (documentation philosophy change)
   - **Customization impact**: Likely to conflict if README customized
   - **Diff summary**:
     ```diff
     - ### Common Tasks
     - Run tests: `./scripts/smoke-test.sh`

     + ### Quick Reference
     + Discover all available commands:
     + ```bash
     + just --list
     + ```
     +
     + Common tasks:
     + ```bash
     + just test
     + just lint
     + just pre-merge
     + ```
     ```

4. `template/CONTRIBUTING.md.jinja`
   - **Lines changed**: +35 -23
   - **Change type**: Update examples (use `just` primarily)
   - **Displacement risk**: MEDIUM (code examples change)
   - **Customization impact**: Moderate (if examples customized)

5. `template/AGENTS.md.jinja`
   - **Lines changed**: +51 -0
   - **Change type**: Enhancement (Task Discovery section)
   - **Displacement risk**: LOW (pure addition)
   - **Customization impact**: Low (new section before existing content)
   - **Diff summary**:
     ```diff
     + ### Task Discovery (START HERE)
     +
     + **First step when working in this project: Discover available tasks**
     +
     + ```bash
     + just --list
     + ```
     +
     + This provides a machine-readable catalog of all development tasks.
     ```

6. `template/justfile.jinja`
   - **Lines changed**: +19 -0
   - **Change type**: Enhancement (help command, better docs)
   - **Displacement risk**: LOW (pure addition)
   - **Customization impact**: Low (unless justfile heavily modified)

7. `template/.github/workflows/release.yml.jinja`
   - **Lines changed**: +14 -8
   - **Change type**: Conditional logic (PyPI auth method)
   - **Displacement risk**: LOW (backward compatible)
   - **Customization impact**: Low (unless workflow customized)
   - **Diff summary**:
     ```diff
     +{% if pypi_auth_method == 'token' -%}
     +     - name: Publish to PyPI
     +       env:
     +         PYPI_TOKEN: ${{ secrets.PYPI_TOKEN }}
     +{% else -%}
     +     - name: Publish to PyPI
     +       permissions:
     +         id-token: write
     +{% endif -%}
     ```

8. `copier.yml`
   - **Lines changed**: +11 -0
   - **Change type**: New variable (pypi_auth_method)
   - **Displacement risk**: NONE (new variable, no conflicts)
   - **Diff summary**:
     ```diff
     + pypi_auth_method:
     +   type: str
     +   help: How should PyPI authentication work?
     +   choices:
     +     - token
     +     - trusted_publishing
     +   default: token
     +   when: "{{ include_github_actions }}"
     ```

---

## Displacement Analysis

### Type 1: Required (Correctness Fixes)

**None** - This release contains no critical fixes.

### Type 2: Optional (Workflow Improvements)

#### Workflow Change: `just --list` as Primary Task Discovery

**What Changed**:
- README now leads with `just --list` for task discovery
- CONTRIBUTING examples use `just` commands primarily
- AGENTS.md adds "Task Discovery" section recommending `just --list`
- setup.sh auto-installs `just` (macOS via Homebrew, Linux via curl)
- check-env.sh verifies `just` availability

**Benefits**:
- **Machine-readable catalog**: `just --list` provides structured task list (better for AI agents)
- **Ecosystem consistency**: Same commands across all chora-base projects (knowledge transfer)
- **Self-documenting**: `just --show <task>` reveals implementation without reading scripts
- **Composable**: justfile can be extended with project-specific tasks
- **Faster discovery**: No need to parse prose documentation or inspect scripts/

**Costs**:
- **Dependency**: Requires `just` installation (automated in v1.4.0, but still a dependency)
- **Learning**: Must understand justfile syntax for adding new tasks
- **Migration**: Existing task knowledge must be mapped to `just` commands

**Decision Criteria**:

**ADOPT if**:
- [ ] Working across multiple chora-base projects (ecosystem benefit)
- [ ] AI agent benefits from machine-readable task catalog
- [ ] `just` installation is acceptable (automated in setup.sh)
- [ ] Starting fresh or willing to update task knowledge

**DEFER if**:
- [ ] Project is stable with well-established script-based workflows
- [ ] Extensive agent knowledge already stored for current approach
- [ ] No need for cross-project consistency
- [ ] Planning to revisit after seeing other projects adopt

**HYBRID approach**:
- [ ] Use `just` for new tasks (follow ecosystem standard)
- [ ] Keep existing script knowledge for current tasks
- [ ] Gradually migrate as you encounter tasks

#### New Feature: PyPI Authentication Configuration

**What Changed**:
- New copier variable: `pypi_auth_method` (token vs trusted_publishing)
- Conditional release.yml workflow based on authentication choice
- Comprehensive PYPI_SETUP.md guide

**Benefits**:
- **Clear setup**: No more confusion about PyPI authentication (based on mcp-n8n feedback)
- **Choice**: Pick method that fits your workflow
- **Troubleshooting**: Comprehensive guide for both methods

**Costs**:
- **Decision required**: Must choose authentication method
- **Migration** (if already configured): May need to update release.yml

**Decision Criteria**:

**ADOPT if**:
- [ ] Planning to publish to PyPI
- [ ] Need clear setup guidance
- [ ] Haven't configured PyPI yet

**DEFER if**:
- [ ] Not publishing to PyPI
- [ ] Already have working PyPI setup
- [ ] No immediate need for publishing

### Type 3: Additive (Safe Enhancements)

#### New Documentation: PYPI_SETUP.md

- **Purpose**: Step-by-step PyPI publishing guide
- **Conflicts**: None (new file)
- **Strategy**: Adopt if publishing to PyPI, ignore otherwise

#### Enhanced justfile

- **Changes**: Added `help` command, better inline docs
- **Conflicts**: Low (unless justfile heavily customized)
- **Strategy**: Merge template improvements, preserve custom tasks

---

## Upgrade Steps

### Prerequisites

```bash
# 1. Ensure clean git state
git status
# Should show "nothing to commit, working tree clean"

# 2. Create backup
git branch backup-pre-upgrade-v1.4.0
git tag backup-v1.3.1

# 3. Review current customizations
git diff $(git log --diff-filter=A --format="%H" -n 1 .copier-answers.yml) HEAD

# 4. Document customizations (especially in docs files)
# List in UPGRADING.md: README, CONTRIBUTING, AGENTS.md customizations
```

### Automated Upgrade

```bash
# Update to v1.4.0
copier update --vcs-ref v1.4.0 --trust

# You'll be prompted for new variable:
# pypi_auth_method: [token/trusted_publishing]
# Choose based on your needs (token is simpler, trusted_publishing is more secure)

# Review changes
git diff

# Test immediately
./scripts/setup.sh  # Will auto-install just if needed
./scripts/check-env.sh
pytest
```

### Manual Conflict Resolution

**If copier update shows conflicts:**

#### Conflict 1: README.md (Development Section)

**Template Change** (leads with `just --list`):
```markdown
## Development

### Quick Reference

**Discover all available commands:**
```bash
just --list
```

**Common tasks:**
```bash
just test
just lint
just pre-merge
```
```

**Your Customization** (likely):
```markdown
## Development

### Running Tests

To run tests:
```bash
./scripts/smoke-test.sh  # Quick tests
./scripts/integration-test.sh  # Full tests
```
```

**Merge Strategy**:
1. Accept template's Quick Reference section (adds `just` discovery)
2. Keep your customization as a "Detailed Guide" subsection
3. Combined result:
   ```markdown
   ## Development

   ### Quick Reference

   **Discover all available commands:**
   ```bash
   just --list
   ```

   **Common tasks:**
   ```bash
   just test      # Run test suite
   just lint      # Code quality checks
   just pre-merge # Full validation
   ```

   ### Detailed Guide

   #### Running Tests

   Using just (recommended):
   ```bash
   just test       # Quick smoke tests
   just test-all   # Full test suite including integration
   ```

   Using scripts directly:
   ```bash
   ./scripts/smoke-test.sh       # Quick tests
   ./scripts/integration-test.sh  # Full tests
   ```
   ```

**Validation**:
```bash
# Both methods should work
just test
./scripts/smoke-test.sh
```

#### Conflict 2: AGENTS.md (Common Tasks Section)

**Template Change** (adds Task Discovery section):
```markdown
## Common Tasks for Agents

### Task Discovery (START HERE)

**First step when working in this project: Discover available tasks**

```bash
just --list
```

[... full section ...]

### Adding a New MCP Tool
[existing content]
```

**Your Customization** (likely):
```markdown
## Common Tasks for Agents

### Project-Specific Task: Generate Documentation

[custom task description]

### Adding a New MCP Tool
[existing content]
```

**Merge Strategy**:
1. Accept template's Task Discovery section at the top
2. Keep your custom tasks after it
3. Combined result:
   ```markdown
   ## Common Tasks for Agents

   ### Task Discovery (START HERE)
   [template content]

   ### Project-Specific Task: Generate Documentation
   [your custom task]

   ### Adding a New MCP Tool
   [existing content]
   ```

**Validation**:
```bash
# Ensure AGENTS.md remains valid
# Check that your custom task instructions still make sense
```

---

## Workflow Replacement Decision

**New Approach**: `just --list` for task discovery

**Current Approach**: Parsing README/scripts directory inspection

### Benefits Analysis

**New Approach (`just --list`) Advantages**:
- ✅ Machine-readable: Structured list of tasks, not prose
- ✅ Ecosystem consistency: Same across all chora-base projects
- ✅ Self-documenting: `just --show <task>` reveals implementation
- ✅ Composable: Easy to add project-specific tasks
- ✅ Discoverable: `just --list` is universal command

**New Approach Disadvantages**:
- ❌ Dependency: Requires `just` installation (mitigated: auto-installed in v1.4.0)
- ❌ Learning curve: Must understand justfile syntax for additions
- ❌ Migration cost: Must map existing task knowledge

**Current Approach Advantages**:
- ✅ No dependencies: Works with just Python + scripts
- ✅ Familiar: Agent already has patterns stored
- ✅ Transparent: Can inspect scripts directly

**Current Approach Disadvantages**:
- ❌ Prose parsing: Must extract tasks from documentation
- ❌ Project-specific: Knowledge doesn't transfer to other chora-base projects
- ❌ Less structured: No standardized task catalog format

### Decision Criteria

**Adopt `just --list` Approach IF**:
- ✅ Working across multiple chora-base projects (knowledge transfer matters)
- ✅ AI agent benefits from structured, machine-readable catalog
- ✅ Willing to invest in learning ecosystem-standard pattern
- ✅ `just` dependency is acceptable (auto-installed)

**Keep Current Approach IF**:
- ✅ Single project context (no cross-project benefit)
- ✅ Extensive existing task knowledge already captured
- ✅ Project is stable, no frequent task additions
- ✅ Strong preference for dependency-free workflows

**Hybrid Strategy**:
- ✅ Use `just` for common tasks (test, lint, build)
- ✅ Keep scripts for specialized workflows
- ✅ Gradually adopt `just` for new tasks
- ✅ Document both methods in project

### Migration Guide

**If adopting `just --list` approach:**

#### Step 1: Update Task Discovery Pattern

**OLD pattern** (project-specific):
```
When working in project:
1. Check README.md "Development" section
2. Inspect scripts/ directory
3. Store task-to-script mappings:
   - "run tests" → ./scripts/smoke-test.sh
   - "lint code" → ./scripts/lint.sh
   - "pre-merge checks" → ./scripts/pre-merge.sh
```

**NEW pattern** (ecosystem-wide):
```
When working in ANY chora-base project:
1. Run: just --list
2. Store task commands (apply to all chora-base projects):
   - "run tests" → just test
   - "lint code" → just lint
   - "pre-merge checks" → just pre-merge
3. Discover implementation: just --show <task>
```

#### Step 2: Migrate Knowledge Notes

**Create ecosystem-level knowledge note**:
```json
{
  "id": "chora-base-task-discovery",
  "created": "2025-10-19",
  "updated": "2025-10-19",
  "tags": ["chora-base", "ecosystem", "task-discovery", "workflow"],
  "ecosystem": "chora-base",
  "applies_to": "all_chora_base_v1.4.0+_projects",

  "pattern": {
    "discovery": "just --list",
    "execution": "just <task-name>",
    "inspection": "just --show <task-name>",
    "help": "just help"
  },

  "common_tasks": {
    "test": "just test",
    "test_all": "just test-all",
    "lint": "just lint",
    "pre_merge": "just pre-merge",
    "build": "just build",
    "clean": "just clean"
  },

  "benefits": [
    "Knowledge transfers across all chora-base projects",
    "Machine-readable task catalog",
    "Self-documenting (just --show)",
    "Composable (easy to add project tasks)"
  ],

  "migration_from": "project-specific script knowledge",
  "migration_benefit": "ecosystem-wide patterns > project-specific knowledge"
}
```

**Update project-specific knowledge notes**:
```json
{
  "id": "my-project-custom-tasks",
  "created": "2025-10-19",
  "tags": ["my-project", "tasks"],
  "inherits_from": "chora-base-task-discovery",

  "custom_tasks": {
    "generate_docs": "just generate-docs",
    "deploy_staging": "just deploy-staging"
  },

  "note": "This project uses chora-base standard tasks + custom tasks above"
}
```

#### Step 3: Validation

```bash
# Verify just is installed
just --version

# Discover tasks
just --list

# Test common tasks
just test
just lint

# Inspect implementation
just --show test
just --show pre-merge
```

---

## Validation Checklist

### Core Functionality

- [ ] Project imports work: `python -c "from {{ package_name }} import *"`
- [ ] Tests pass: `pytest` OR `just test`
- [ ] Scripts execute: `./scripts/check-env.sh`
- [ ] `just` installed: `just --version` (if adopting)

### Template Integration

- [ ] PYPI_SETUP.md generated (if `include_github_actions=true`)
- [ ] README.md merged (Quick Reference section + customizations preserved)
- [ ] AGENTS.md merged (Task Discovery section + custom tasks preserved)
- [ ] CONTRIBUTING.md merged (examples updated + custom sections preserved)
- [ ] `.copier-answers.yml` shows `_commit: v1.4.0`
- [ ] New copier variable: `pypi_auth_method` set

### Quality Gates

- [ ] Pre-commit hooks pass: `pre-commit run --all-files`
- [ ] Linting passes: `ruff check .` OR `just lint`
- [ ] Type checking passes: `mypy src/`
- [ ] Coverage maintained: `pytest --cov` OR `just test-all`

### Documentation

- [ ] README Quick Reference accurate
- [ ] AGENTS.md Task Discovery section present
- [ ] UPGRADING.md documents this upgrade
- [ ] Custom documentation sections preserved

### Workflow Validation (if adopting `just`)

- [ ] `just --list` shows expected tasks
- [ ] `just test` runs tests successfully
- [ ] `just lint` runs linting
- [ ] `just pre-merge` runs full validation
- [ ] Custom tasks added to justfile work

---

## Example Upgrade Session

```bash
# Starting state (v1.3.1 project)
$ cat .copier-answers.yml | grep _commit
_commit: v1.3.1

$ git status
On branch main
nothing to commit, working tree clean

# Create backup
$ git branch backup-pre-upgrade-v1.4.0
$ git tag backup-v1.3.1

# Document current customizations
$ cat UPGRADING.md
# Upgrading my-project

## Customizations to Preserve
- README.md: Custom "Architecture" section
- AGENTS.md: Project-specific task "Generate API docs"
- justfile: Custom task "deploy-staging"

# Run upgrade
$ copier update --vcs-ref v1.4.0 --trust

[copier prompts]
pypi_auth_method (choices: token, trusted_publishing): token

[copier applies updates]

# Review changes
$ git status
On branch main
Changes not staged for commit:
  modified:   .copier-answers.yml
  modified:   README.md
  modified:   AGENTS.md
  modified:   CONTRIBUTING.md
  modified:   scripts/setup.sh
  modified:   scripts/check-env.sh
  new file:   PYPI_SETUP.md

$ git diff README.md | head -20
[shows Quick Reference section added]
[shows custom Architecture section preserved]

$ git diff AGENTS.md | head -20
[shows Task Discovery section added at top]
[shows custom "Generate API docs" task preserved]

# Verify just installation
$ ./scripts/setup.sh
=== my-project Setup Script ===

Installing 'just' command runner...
  Using Homebrew...
✓ just installed successfully
just 1.15.0

[continues with setup]

# Test task discovery
$ just --list
Available recipes:
    test           # Run test suite
    test-all       # Run all tests including integration
    lint           # Run code quality checks
    pre-merge      # Run all pre-merge checks
    build          # Build distribution packages
    clean          # Clean build artifacts
    deploy-staging # Deploy to staging [CUSTOM]

# Validate
$ just test
===== 42 passed in 3.14s =====

$ just lint
✓ All checks passed

$ ./scripts/check-env.sh
✓ Python 3.11.5
✓ Dependencies installed
✓ Pre-commit hooks installed
✓ Environment variables set
✓ just command runner available

# Commit upgrade
$ git add .
$ git commit -m "chore: Upgrade to chora-base v1.4.0

- Updated from v1.3.1 to v1.4.0
- Configured PyPI authentication (token method)
- Adopted just --list for task discovery
- Auto-installed just in setup.sh
- Preserved customizations:
  - README: Architecture section
  - AGENTS: Generate API docs task
  - justfile: deploy-staging task
- All tests passing

Benefits:
- Clear PyPI publishing setup
- Machine-readable task catalog for AI agents
- Ecosystem-consistent workflows

See docs/upgrades/v1.3-to-v1.4.md for details"

$ git log --oneline -1
a1b2c3d chore: Upgrade to chora-base v1.4.0
```

---

## Rollback Procedure

**If upgrade fails or causes issues:**

```bash
# Option 1: Rollback commit
git reset --hard HEAD~1

# Option 2: Restore from backup branch
git checkout main
git reset --hard backup-pre-upgrade-v1.4.0

# Option 3: Restore from tag
git checkout main
git reset --hard backup-v1.3.1

# Verify rollback
cat .copier-answers.yml | grep _commit
# Should show v1.3.1

./scripts/check-env.sh
pytest

# If just was installed and causing issues
# Remove just (optional, doesn't hurt to keep it)
# macOS: brew uninstall just
# Linux: rm ~/.local/bin/just
```

**Report issues**:
- GitHub: https://github.com/liminalcommons/chora-base/issues/new
- Include: version numbers (v1.3.1 → v1.4.0), error messages, customizations involved

---

## Common Issues

### Issue 1: `just` Installation Fails

**Symptom**:
```
Error: Failed to install just
  Please install manually
```

**Cause**: Homebrew not available (macOS) or curl installer failed (Linux)

**Solution**:
```bash
# macOS: Install Homebrew first
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew install just

# Linux: Manual cargo install
cargo install just

# Or: Download binary directly
curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to ~/.local/bin
export PATH="$HOME/.local/bin:$PATH"

# Verify
just --version
```

### Issue 2: Merge Conflict in README.md

**Symptom**:
```
<<<<<<< HEAD
## Development

### Running Tests
[your custom content]
=======
## Development

### Quick Reference
[template content]
>>>>>>> copier-update
```

**Cause**: Both you and template modified Development section

**Solution**:
```bash
# Accept both sections, organize them
# 1. Keep template's Quick Reference at top
# 2. Add your custom content as subsection

# Manually edit README.md to merge
git add README.md
git commit -m "merge: Combine template Quick Reference with custom Development docs"
```

### Issue 3: Custom justfile Tasks Conflict

**Symptom**:
Copier shows conflict in justfile

**Cause**: Template enhanced justfile, you have custom tasks

**Solution**:
```bash
# View the conflict
git diff justfile

# Strategy: Accept template changes, re-add custom tasks
# 1. Accept template version
git checkout --theirs justfile

# 2. Re-add your custom tasks at bottom
cat >> justfile <<'EOF'

# === Project-Specific Tasks ===

deploy-staging:
    @echo "Deploying to staging..."
    [your custom logic]
EOF

# 3. Verify
just --list
# Should show both template tasks AND custom tasks

git add justfile
git commit -m "merge: Combine template justfile improvements with custom tasks"
```

---

## For AI Agents: Decision Documentation

**After completing upgrade, store decision**:

```json
{
  "id": "chora-base-v1.3-to-v1.4-upgrade",
  "created": "2025-10-19",
  "tags": ["chora-base", "upgrade", "v1.4.0", "workflow-migration"],

  "upgrade": {
    "from": "v1.3.1",
    "to": "v1.4.0",
    "decision": "adopted",
    "reasoning": "Benefits of ecosystem consistency and machine-readable task catalog outweigh migration costs"
  },

  "customizations_preserved": [
    "README.md: Custom Architecture section",
    "AGENTS.md: Project-specific 'Generate API docs' task",
    "justfile: Custom 'deploy-staging' task"
  ],

  "workflow_changes": [
    {
      "domain": "task_discovery",
      "from": "Parsing README Development section",
      "to": "just --list (ecosystem-standard)",
      "benefit": "Machine-readable, transfers to all chora-base projects"
    },
    {
      "domain": "task_execution",
      "from": "./scripts/<task>.sh",
      "to": "just <task>",
      "benefit": "Consistent vocabulary across ecosystem"
    }
  ],

  "knowledge_migration": {
    "created": "chora-base-task-discovery (ecosystem-level note)",
    "updated": "project-specific tasks now reference ecosystem pattern",
    "benefit": "Learned patterns apply to all chora-base v1.4.0+ projects"
  },

  "validation": {
    "tests": "passing (just test: 42 passed)",
    "coverage": "maintained (82%)",
    "scripts": "working (./scripts/check-env.sh: all checks passed)",
    "just": "installed and functional (just --version: 1.15.0)"
  },

  "time_invested": "2 hours (upgrade + testing + knowledge migration)",
  "future_benefit": "Patterns learned here apply to all future chora-base projects"
}
```

---

## Related Documentation

- [Upgrade Philosophy](PHILOSOPHY.md) - Principles and decision frameworks
- [v1.4.0 CHANGELOG](../../CHANGELOG.md#140---2025-10-19) - Full release notes
- [Next upgrade: v1.4.0 to v1.5.0](v1.4-to-v1.5.md) - Continue upgrading (when available)
- [PYPI_SETUP.md](../../template/PYPI_SETUP.md.jinja) - PyPI publishing guide (template)

---

**Feedback Welcome**: This is the first concrete upgrade guide using the new AI-optimized format. Improvements welcome via GitHub issues!
