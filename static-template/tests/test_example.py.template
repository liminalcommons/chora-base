"""
Example test file demonstrating testing patterns

This file shows how to use the fixtures and patterns from conftest.py.
Adapt these examples for your specific testing needs.
"""

import pytest
from pathlib import Path


# ============================================================================
# Example 1: Testing with Temporary Workspace
# ============================================================================

def test_file_creation(temp_workspace):
    """Example: Test file creation in temporary directory."""
    # Create a file
    test_file = temp_workspace / "config.json"
    test_file.write_text('{"key": "value"}')

    # Verify it exists
    assert test_file.exists()
    assert '{"key": "value"}' in test_file.read_text()


def test_directory_structure(temp_project_structure):
    """Example: Test with predefined project structure."""
    # temp_project_structure provides: src/, tests/, docs/, config/
    assert (temp_project_structure / "src").exists()
    assert (temp_project_structure / "tests").exists()
    assert (temp_project_structure / "docs").exists()


# ============================================================================
# Example 2: Testing Hyphenated Scripts
# ============================================================================

@pytest.mark.skip(reason="Example only - adapt for your scripts")
def test_hyphenated_script(load_hyphenated_script):
    """Example: Test a script with hyphens in filename (e.g., my-script.py)."""
    # Load the script
    script = load_hyphenated_script("scripts/my-script.py", "my_script")

    # Test a function from the script
    result = script.some_function()
    assert result is not None


# ============================================================================
# Example 3: Testing with Mock Data
# ============================================================================

def test_json_parsing(sample_json_data):
    """Example: Test JSON parsing with sample data."""
    # sample_json_data provides a dict with common structure
    assert sample_json_data["name"] == "Test Item"
    assert sample_json_data["version"] == "1.0.0"
    assert len(sample_json_data["items"]) == 2


# ============================================================================
# Example 4: Testing Console Output
# ============================================================================

@pytest.mark.skip(reason="Example only - adapt for your functions")
def test_console_output(captured_output):
    """Example: Test functions that print to console."""
    # Call function that prints
    # my_function_that_prints()

    # Verify output
    assert len(captured_output) > 0
    # assert "Expected message" in captured_output[0]


# ============================================================================
# Example 5: Parametrized Tests
# ============================================================================

@pytest.mark.parametrize("input_value,expected", [
    (1, 2),
    (2, 4),
    (3, 6),
])
def test_parametrized(input_value, expected):
    """Example: Test multiple inputs with parametrize."""
    result = input_value * 2
    assert result == expected


# ============================================================================
# Example 6: Testing Error Conditions
# ============================================================================

def test_error_handling():
    """Example: Test that errors are raised correctly."""
    with pytest.raises(ValueError, match="Invalid value"):
        raise ValueError("Invalid value")


# ============================================================================
# Example 7: Async Tests (requires pytest-asyncio)
# ============================================================================

@pytest.mark.async
@pytest.mark.skip(reason="Example only - adapt for your async functions")
async def test_async_function():
    """Example: Test async functions."""
    # result = await my_async_function()
    # assert result == expected
    pass


# ============================================================================
# Example 8: Test Class Organization
# ============================================================================

class TestFeature:
    """Group related tests in a class."""

    def test_feature_initialization(self):
        """Test feature setup."""
        # feature = MyFeature()
        # assert feature.is_initialized()
        pass

    def test_feature_operation(self):
        """Test feature behavior."""
        # feature = MyFeature()
        # result = feature.do_something()
        # assert result == expected
        pass

    def test_feature_error_handling(self):
        """Test feature error cases."""
        # feature = MyFeature()
        # with pytest.raises(SomeError):
        #     feature.invalid_operation()
        pass
